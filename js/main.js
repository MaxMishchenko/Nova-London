document.addEventListener("DOMContentLoaded",(()=>{const e=document.body,t=(t,o)=>{t.classList.toggle("active",o),e.classList.toggle("lock",o)},o=e=>{const t=e.querySelector("form");if(t){t.reset();t.querySelectorAll("input, textarea").forEach((e=>e.classList.remove("form--error")))}window.resetRating&&window.resetRating()};(()=>{const e=document.querySelectorAll(".form__rating-star");let t=0;const o=(t,o)=>{e.forEach((e=>{e.classList.remove("hover","selected"),e.dataset.rate<=t&&e.classList.add(o)}))};e.forEach((e=>{["mouseover","mouseout","click"].forEach((s=>{e.addEventListener(s,(s=>{const r=e.dataset.rate;"mouseover"===s.type&&o(r,"hover"),"mouseout"===s.type&&o(t,"selected"),"click"===s.type&&(t=r,o(t,"selected"))}))}))}));window.resetRating=()=>{t=0,e.forEach((e=>e.classList.remove("selected")))}})(),(()=>{const e=document.getElementById("contactBtn");window.addEventListener("scroll",(()=>{e.classList.toggle("visible",window.scrollY>0)}))})(),(()=>{const e={contactBtn:{element:document.getElementById("contactBtn"),popup:document.getElementById("popupContactUs")},bookNowBtn:{element:document.getElementById("bookNowBtn"),popup:document.getElementById("popupContactUs")},feedbackBtn:{element:document.getElementById("feedbackBtn"),popup:document.getElementById("popupFeedback")},orderBtn:{element:document.querySelector(".order--js"),popup:document.getElementById("popupOrder")},orderNowBtn:{element:document.querySelector(".order-now--js"),popup:document.getElementById("popupOrder")}};Object.values(e).forEach((({element:e,popup:s})=>{((e,s)=>{e.addEventListener("click",(()=>t(s,!0))),s.addEventListener("click",(e=>{e.target===s&&(t(s,!1),o(s))}));const r=s.querySelector(".form__close");r&&r.addEventListener("click",(()=>{t(s,!1),o(s)}))})(e,s)}))})(),(()=>{const e=(e,t,o={threshold:1})=>{const s=document.querySelectorAll(e),r=new IntersectionObserver(((e,o)=>{e.forEach((e=>{e.isIntersecting&&(t(e.target),o.unobserve(e.target))}))}),o);s.forEach((e=>r.observe(e)))};e(".section__best-price-old",(e=>{e.classList.add("visible")})),e(".section__reasons-icon",(()=>{document.querySelectorAll(".section__reasons-icon").forEach(((e,t)=>{setTimeout((()=>e.classList.add("visible")),500*t)}))}),{threshold:.1})})(),(()=>{const e=document.querySelectorAll("form");e.forEach((e=>{e.addEventListener("submit",(async o=>{o.preventDefault();let s=!0;const r=e.querySelectorAll('input[type="email"]'),n=e.querySelectorAll('input[type="tel"]');if(e.querySelectorAll("input, textarea, select").forEach((e=>{e.hasAttribute("required")&&!e.value.trim()||e.pattern&&!new RegExp(e.pattern).test(e.value)?(e.classList.add("form--error"),s=!1):e.classList.remove("form--error")})),r.forEach((e=>{/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value)?e.classList.remove("form--error"):(e.classList.add("form--error"),s=!1)})),n.forEach((e=>{/^\+1\s?\(?[2-9][0-9]{2}\)?[-.\s]?[2-9][0-9]{2}[-.\s]?[0-9]{4}$/.test(e.value)?e.classList.remove("form--error"):(e.classList.add("form--error"),s=!1)})),!s)return;const c=new FormData(e),l={firstname:c.get("firstname")||"",lastname:c.get("lastname")||"",company:c.get("company")||"",address:c.get("address")||"",phone:c.get("phone")||"",email:c.get("email")||"",message:c.get("message")||"",product:c.get("product")||"",hashtoken:"7BRltAlHPDGAXfQAf0hdIFpRG9aVBlC9"};try{const o=await fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),s=await o.json();console.log("Test API Response:",s);const r=e.closest(".popup");((e,o)=>{const s=document.getElementById("popupSuccess"),r=document.getElementById("successMsg");switch(e&&t(e,!1),t(s,!0),console.log(o),o){case"popupContactUs":case"popupOrder":default:r.textContent="We will get back to you shortly!";break;case"popupFeedback":r.textContent="Thank you for your feedback!"}const n=s.querySelector(".form__close");n&&n.addEventListener("click",(()=>{t(s,!1)})),s.addEventListener("click",(e=>{e.target===s&&t(s,!1)}));const c=document.getElementById("successClose");c&&c.addEventListener("click",(()=>{t(s,!1)}))})(r,r?r.id:""),e.reset(),window.resetRating&&window.resetRating()}catch(e){console.error("Error submitting form:",e)}}));e.querySelectorAll('input[type="tel"]').forEach((e=>{e.addEventListener("input",(()=>{let t=e.value.replace(/\D/g,""),o="+1 ";t.startsWith("1")&&(t=t.slice(1)),t.length>0&&(o+="("+t.slice(0,3)),t.length>=4&&(o+=") "+t.slice(3,6)),t.length>=7&&(o+="-"+t.slice(6,10)),e.value=o})),e.addEventListener("blur",(()=>{e.classList.toggle("form--error",!/^\+1\s?\(?[2-9][0-9]{2}\)?[.\-\s]?[2-9][0-9]{2}[.\-\s]?[0-9]{4}$/.test(e.value))}))}))}))})()}));